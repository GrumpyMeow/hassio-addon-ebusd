#!/usr/bin/with-contenv bashio
# ==============================================================================
# Home Assistant Add-on: eBUSd
# Runs ebusd
# ==============================================================================


bashio::log.info "Starting ebusd..."

exec /usr/bin/ebusd \
    --scanconfig \
    --device=$(bashio::config 'device') \
    --port=$(bashio::addon.port '8888/tcp') \
    --foreground  \
    --mqtthost=$(bashio::services mqtt "host") \
    --mqttport=$(bashio::services mqtt "port") \
    --mqttuser=$(bashio::services mqtt "username") \
    --mqttpass=$(bashio::services mqtt "password")